<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title></title>
		<script src="js/echarts.min.js"></script>
		<script src="js/china.js"></script>
		<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
	</head>
	<body>
		<div id="myChart5" style="width: 50vw;height: 60vw;">
		<script type="text/javascript">
			$(document).ready(function() {
				$.getJSON("data/2022年结婚人数.json", function(data1) {
					console.log(data1);
					data1.sort(function (a, b) {
						return a.value - b.value;
					});
			var myChart5 = echarts.init(document.getElementById("myChart5"));
			var mapOption = {
				title: { },
				tooltip: {
					trigger: 'item',
        			formatter: '{b}: {c}万对'
				},
				visualMap: {
					left: 'left',
					top:'top',
					min: 0,
					max: 55,
					inRange: {
						// prettier-ignore
						color: ['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']
     				 },
					text: ['High', 'Low'],
					calculable: true
					},
				series: [{
					name:"人数",
					type: 'map',
					map:"china",
					universalTransition: true,
					data: data1.map(function(item) {
						return { name: item.name, value: item.value };
					}),
					animation:true,
					roam:true,
					label:{
						color:"#666",
						show:true,
						fontSize:10,
						position:'inside',
						verticalAlign:"middle",
					},
					emphasis:{
						focus:'self',
					},
					itemStyle:{
						borderColor:"rgba(39,211,233,1)",
						borderWidth:1,
					},
				},],
			};
			var barOption = {
                    xAxis: {
                    	type: 'value',                            
                    },
                    yAxis: {
                        type:'category',
						data: data1.map(function(item) {
						return item.name;
					}),
                    },
					visualMap: {
						left: 'left',
						top:'top',
						min: 0,
						max: 30,
						inRange: {
						color:['#313695', '#4575b4', '#74add1', '#abd9e9', '#e0f3f8', '#ffffbf', '#fee090', '#fdae61', '#f46d43', '#d73027', '#a50026']
      					},
						text: ['High', 'Low'],
						calculable: true
						},
						
						tooltip: {
							trigger: 'item',
							formatter: '{b}: {c}万对'
						},
                        series: [{
                            data: data1.map(function(item) {
								return item.value;
							}),
                            type: 'bar',
							animation:true,
                        }]
                    };
					let currentOption = mapOption;
			myChart5.setOption(mapOption);
			setInterval(function () {
				currentOption = currentOption === mapOption ? barOption : mapOption;
				myChart5.setOption(currentOption, true);
			}, 3000);
	
			}).fail(function() {
					console.log("An error has occurred.");
				});
			});
		</script>
	</div>
	</body>
</html>